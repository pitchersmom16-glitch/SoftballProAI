#!/bin/sh
# Post-commit hook: add a Live Update entry to workflows.md (if present)
# Runs the Node helper script which stages & commits the change

NODE=$(command -v node || true)
if [ -z "$NODE" ]; then
  echo "node not found in PATH — skipping workflows live update hook"
  exit 0
fi

SCRIPT_DIR=$(git rev-parse --show-toplevel)/scripts
if [ -x "$SCRIPT_DIR/add-workflow-entry.cjs" ] || [ -f "$SCRIPT_DIR/add-workflow-entry.cjs" ]; then
  node "$SCRIPT_DIR/add-workflow-entry.cjs"
else
  echo "scripts/add-workflow-entry.cjs not found — skipping"
fi
